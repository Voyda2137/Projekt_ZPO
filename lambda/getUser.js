"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const DatabaseUtils_1 = require("./Utils/DatabaseUtils");
exports.handler = async (event) => {
    try {
        const header = event.headers['From'];
        if (header) {
            const getUser = await (0, DatabaseUtils_1.getUserByLogin)(header);
            if (getUser) {
                delete getUser.password;
                return {
                    statusCode: 200,
                    body: JSON.stringify({ user: getUser }, null, 2)
                };
            }
            else
                return {
                    statusCode: 500,
                    body: JSON.stringify({ message: 'Internal Server Error' })
                };
        }
        else {
            console.error('Header is missing');
            return {
                statusCode: 500,
                body: JSON.stringify({ message: 'Internal Server Error' })
            };
        }
    }
    catch (e) {
        console.error('Error ', e);
        return {
            statusCode: 500,
            body: JSON.stringify({ message: 'Internal Server Error' })
        };
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0VXNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImdldFVzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx5REFBcUQ7QUFFckQsT0FBTyxDQUFDLE9BQU8sR0FBRyxLQUFLLEVBQUMsS0FBc0IsRUFBRSxFQUFFO0lBQzlDLElBQUk7UUFDQSxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBRXBDLElBQUcsTUFBTSxFQUFDO1lBQ04sTUFBTSxPQUFPLEdBQUcsTUFBTSxJQUFBLDhCQUFjLEVBQUMsTUFBTSxDQUFDLENBQUE7WUFDNUMsSUFBRyxPQUFPLEVBQUM7Z0JBQ1AsT0FBTyxPQUFPLENBQUMsUUFBUSxDQUFBO2dCQUN2QixPQUFPO29CQUNILFVBQVUsRUFBRSxHQUFHO29CQUNmLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7aUJBQ2pELENBQUE7YUFDSjs7Z0JBQ0ksT0FBTztvQkFDUixVQUFVLEVBQUUsR0FBRztvQkFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFDLE9BQU8sRUFBRSx1QkFBdUIsRUFBQyxDQUFDO2lCQUMzRCxDQUFBO1NBQ0o7YUFDRztZQUNBLE9BQU8sQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQTtZQUNsQyxPQUFPO2dCQUNILFVBQVUsRUFBRSxHQUFHO2dCQUNmLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUMsT0FBTyxFQUFFLHVCQUF1QixFQUFDLENBQUM7YUFDM0QsQ0FBQTtTQUNKO0tBQ0o7SUFDRCxPQUFPLENBQUMsRUFBRTtRQUNOLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQzFCLE9BQU87WUFDSCxVQUFVLEVBQUUsR0FBRztZQUNmLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUMsT0FBTyxFQUFFLHVCQUF1QixFQUFDLENBQUM7U0FDM0QsQ0FBQTtLQUNKO0FBQ0wsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBUElHYXRld2F5RXZlbnR9IGZyb20gXCJhd3MtbGFtYmRhXCI7XHJcbmltcG9ydCB7Z2V0VXNlckJ5TG9naW59IGZyb20gXCIuL1V0aWxzL0RhdGFiYXNlVXRpbHNcIjtcclxuXHJcbmV4cG9ydHMuaGFuZGxlciA9IGFzeW5jKGV2ZW50OiBBUElHYXRld2F5RXZlbnQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZXZlbnQuaGVhZGVyc1snRnJvbSddXHJcblxyXG4gICAgICAgIGlmKGhlYWRlcil7XHJcbiAgICAgICAgICAgIGNvbnN0IGdldFVzZXIgPSBhd2FpdCBnZXRVc2VyQnlMb2dpbihoZWFkZXIpXHJcbiAgICAgICAgICAgIGlmKGdldFVzZXIpe1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGdldFVzZXIucGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogMjAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt1c2VyOiBnZXRVc2VyfSwgbnVsbCwgMilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiA1MDAsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7bWVzc2FnZTogJ0ludGVybmFsIFNlcnZlciBFcnJvcid9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0hlYWRlciBpcyBtaXNzaW5nJylcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDUwMCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHttZXNzYWdlOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJ30pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yICcsIGUpXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3RhdHVzQ29kZTogNTAwLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7bWVzc2FnZTogJ0ludGVybmFsIFNlcnZlciBFcnJvcid9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==